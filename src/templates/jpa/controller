package controllers

import java.util._

import play._
import play.mvc._

import models._

object ${EntityName}sController extends Controller {

  import views.${EntityName}s._
  import play.data.validation._

  def index = {
    val all${EntityName}s = ${EntityName}.find(
      "order by id desc").from(1).fetch(100);

    html.index("All ${EntityName}s", all${EntityName}s)
  }

  def show(id: Long) = {

	${EntityName}.findById(id).map { ${EntityNameVar} =>
      html.show("${EntityName} " + id, ${EntityNameVar})
    }.getOrElse {
      NotFound("No such ${EntityName}")
    }
  }

  def newValue() = {
     var ${EntityNameVar} = new ${EntityName}
     html.newValue("New ${EntityName}", ${EntityNameVar})
  }

  def edit(id: Long) = {
  
    ${EntityName}.findById(id).map { ${EntityNameVar} =>
      html.edit("${EntityName} " + id, ${EntityNameVar})
    }.getOrElse {
      NotFound("No such ${EntityName}")
    }
  }

  def create() = {
        var ${EntityNameVar} = new ${EntityName}
        ${formData}
        ${EntityNameVar}.save
  
        show(${EntityNameVar}.id)
  }

  def update(id: Long) = {
    ${EntityName}.findById(id).map { ${EntityNameVar} =>
        ${formData}
        ${EntityNameVar}.save
        
        show(id)

    }.getOrElse {
        NotFound("No such ${EntityName}")
    }
  }
  
  def delete(id: Long) = {
    ${EntityName}.findById(id).map { ${EntityNameVar} =>
        ${EntityNameVar}.delete
        
        index

    }.getOrElse {
        NotFound("No such ${EntityName}")
    }
  }
  
  private def isEmptyString(input : String) : Boolean = {
  		(input == null || "".equals(input)) 
  }
}